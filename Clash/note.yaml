# https://raw.githubusercontent.com/chuan0712/Utility-Room/main/Clash/note.yaml

sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  skip-domain:
    - "Mijia Cloud"
    - "+.push.apple.com"

dns:
  enable: true
  ipv6: true
  prefer-h3: true
  listen: 0.0.0.0:1053
  cache-algorithm: arc
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - "*"
    - +.lan
    - +.local
    - +.msftconnecttest.com
    - +.msftncsi.com
    - +.market.xiaomi.com
  nameserver:
    - https://8.8.8.8/dns-query
    - https://9.9.9.9/dns-query
    - https://1.1.1.1/dns-query
  direct-nameserver:
    - https://223.5.5.5/dns-query
    - https://1.12.12.12/dns-query



x-anchors:
  # Proxy Groups
  common-proxies: &common [DIRECT, REJECT, ğŸ‡­ğŸ‡° è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° ä¼šè¯ä¿æŒ, ğŸ‡¸ğŸ‡¬ è‡ªåŠ¨é€‰æ‹©, ğŸ‡¸ğŸ‡¬ ä¼šè¯ä¿æŒ, ğŸ‡ºğŸ‡¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡ºğŸ‡¸ ä¼šè¯ä¿æŒ]
  auto-select:    &auto   {type: url-test, include-all: true, interval: 300, tolerance: 50}
  load-balance:   &lb     {type: load-balance, include-all: true, strategy: sticky-sessions, hidden: true}
  # Rule Providers
  classical-rule: &class  {type: http, interval: 86400, behavior: classical, format: yaml}
  domain-rule:    &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  ipcidr-rule:    &ip     {type: http, interval: 86400, behavior: ipcidr, format: mrs}

proxy-groups:
  - {name: âœˆï¸ èŠ‚ç‚¹æ€»è§ˆ, type: select, include-all: true}
  - {name: ğŸ”— é»˜è®¤ä»£ç†, type: select, proxies: *common}
  - {name: ğŸ¶ éŸ³ä¹åª’ä½“, type: select, proxies: *common}
  - {name: ğŸ“² ç”µæŠ¥æ¶ˆæ¯, type: select, proxies: *common}
  - {name: ğŸ’¬ æ™ºèƒ½åŠ©ç†, type: select, proxies: *common}
  - {name: ğŸ“¹ æ²¹ç®¡è§†é¢‘, type: select, proxies: *common}

  # è‡ªåŠ¨é€‰æ‹© (url-test)
  - {name: ğŸ‡­ğŸ‡° è‡ªåŠ¨é€‰æ‹©, <<: *auto, filter: "(?i)æ¸¯|ğŸ‡­ğŸ‡°|HongKong|Hong Kong" }
  - {name: ğŸ‡¸ğŸ‡¬ è‡ªåŠ¨é€‰æ‹©, <<: *auto, filter: "(?i)æ–°åŠ å¡|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|Singapore" }
  - {name: ğŸ‡ºğŸ‡¸ è‡ªåŠ¨é€‰æ‹©, <<: *auto, filter: "(?i)ç¾|ğŸ‡ºğŸ‡¸|America|United States" }
  # ä¼šè¯ä¿æŒ (load-balance)
  - {name: ğŸ‡­ğŸ‡° ä¼šè¯ä¿æŒ, <<: *lb, filter: "(?i)æ¸¯|ğŸ‡­ğŸ‡°|HongKong|Hong Kong" }
  - {name: ğŸ‡¸ğŸ‡¬ ä¼šè¯ä¿æŒ, <<: *lb, filter: "(?i)æ–°åŠ å¡|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|Singapore" }
  - {name: ğŸ‡ºğŸ‡¸ ä¼šè¯ä¿æŒ, <<: *lb, filter: "(?i)ç¾|ğŸ‡ºğŸ‡¸|America|United States" }


rules:
  # ğŸ“¦ åŸºç¡€è§„åˆ™
  - RULE-SET,private_ip,           DIRECT,no-resolve
  - RULE-SET,private_domain,       DIRECT
  - RULE-SET,steam@cn_domain,      DIRECT
  - RULE-SET,googlefcm_domain,     DIRECT
  - RULE-SET,category-ai-cn_domain,DIRECT
  - RULE-SET,category-ai-!cn_domain, ğŸ’¬ æ™ºèƒ½åŠ©ç†
  - RULE-SET,google_domain,        ğŸ”— é»˜è®¤ä»£ç†
  - RULE-SET,bing_domain,          ğŸ”— é»˜è®¤ä»£ç†
  - RULE-SET,github_domain,        ğŸ”— é»˜è®¤ä»£ç†
  - RULE-SET,youtube_domain,       ğŸ“¹ æ²¹ç®¡è§†é¢‘
  - RULE-SET,spotify_domain,       ğŸ¶ éŸ³ä¹åª’ä½“
  - RULE-SET,telegram_domain,      ğŸ“² ç”µæŠ¥æ¶ˆæ¯
  - RULE-SET,microsoft_domain,     DIRECT
  - RULE-SET,cn_domain,            DIRECT

  - RULE-SET,telegram_ip,          ğŸ“² ç”µæŠ¥æ¶ˆæ¯,no-resolve
  - RULE-SET,google_ip,            ğŸ”— é»˜è®¤ä»£ç†,no-resolve
  - RULE-SET,cn_ip,                DIRECT,no-resolve

  # æ¼ç½‘ä¹‹é±¼
  - MATCH,                         ğŸ”— é»˜è®¤ä»£ç†




rule-providers:
  # === Classical è§„åˆ™ ===
  #china:
  #  <<: *class
  #  path: ./ruleset/classical/cn.yaml
  #  url: "https://raw.githubusercontent.com/chuan0712/Utility-Room/main/Clash/cn.yaml"

  # === Domain è§„åˆ™ ===
  # === å›½å†…åŸºç¡€åŸŸå ===
  private_domain:
    <<: *domain
    path: ./ruleset/domain/private.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs"
  cn_domain:
    <<: *domain
    path: ./ruleset/domain/cn.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"

  # === ç‰¹å®šç›´è¿åŸŸå ===
  steam@cn_domain:
    <<: *domain
    path: ./ruleset/domain/steam@cn.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/steam@cn.mrs"
  googlefcm_domain: # è°·æ­Œæ¨é€
    <<: *domain
    path: ./ruleset/domain/googlefcm.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/googlefcm.mrs"
  microsoft_domain:
    <<: *domain
    path: ./ruleset/domain/microsoft.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs"

  # === AI ç±»åŸŸå ===
  category-ai-cn_domain: # å›½å†… AI
    <<: *domain
    path: ./ruleset/domain/category-ai-cn.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ai-cn.mrs"
  category-ai-!cn_domain: # éå›½å†… AI
    <<: *domain
    path: ./ruleset/domain/category-ai-!cn.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ai-!cn.mrs"

  # === å›½å¤–å¸¸è§æœåŠ¡åŸŸå ===
  bing_domain:
    <<: *domain
    path: ./ruleset/domain/bing.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bing.mrs"
  github_domain:
    <<: *domain
    path: ./ruleset/domain/github.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs"
  google_domain:
    <<: *domain
    path: ./ruleset/domain/google.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs"
  spotify_domain:
    <<: *domain
    path: ./ruleset/domain/spotify.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/spotify.mrs"
  telegram_domain:
    <<: *domain
    path: ./ruleset/domain/telegram.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs"
  youtube_domain:
    <<: *domain
    path: ./ruleset/domain/youtube.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs"

  # === IP è§„åˆ™ ===
  private_ip:
    <<: *ip
    path: ./ruleset/ipcidr/private.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.mrs"
  cn_ip:
    <<: *ip
    path: ./ruleset/ipcidr/cn.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs"
  google_ip:
    <<: *ip
    path: ./ruleset/ipcidr/google.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs"
  telegram_ip:
    <<: *ip
    path: ./ruleset/ipcidr/telegram.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs"
