# https://raw.githubusercontent.com/chuan0712/Utility-Room/main/Clash/note.yaml

dns:
  enable: true
  ipv6: true
  prefer-h3: true
  listen: 0.0.0.0:1053
  cache-algorithm: arc
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - "*"
    - +.lan
    - +.local
    - +.msftconnecttest.com
    - +.msftncsi.com
    - +.market.xiaomi.com
  nameserver:
    - https://dns.7773000.xyz/api/dns-query


x-anchors:
  auto-select:    &auto   {type: url-test, include-all: true, interval: 300, tolerance: 50}
  # Rule Providers
  domain-rule:    &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  ipcidr-rule:    &ip     {type: http, interval: 86400, behavior: ipcidr, format: mrs}

proxy-groups:
  - {name: âœˆï¸ èŠ‚ç‚¹æ€»è§ˆ, type: select, include-all: true}
  - {name: ğŸ”— é»˜è®¤ä»£ç†, type: select, proxies: [DIRECT, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ ç‹®åŸ, ğŸ‡ºğŸ‡¸ ç¾å›½] }
  - {name: â˜ï¸ å¾®è½¯äº‘ç›˜, type: select, proxies: [DIRECT, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ ç‹®åŸ, ğŸ‡ºğŸ‡¸ ç¾å›½] }

  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯, type: url-test, include-all: true, filter: "(?i)æ¸¯|HK|Hong|ğŸ‡­ğŸ‡°" }
  - {name: ğŸ‡¸ğŸ‡¬ ç‹®åŸ, type: url-test, include-all: true, filter: "(?i)æ–°|SG|Singapore|ğŸ‡¸ğŸ‡¬" }
  - {name: ğŸ‡ºğŸ‡¸ ç¾å›½, type: url-test, include-all: true, filter: "(?i)ç¾|US|United States|ğŸ‡ºğŸ‡¸" }


rules:
  # ğŸ“¦ åŸºç¡€è§„åˆ™
  - DOMAIN-SUFFIX,googleapis.cn,ğŸ”— é»˜è®¤ä»£ç†
  - RULE-SET,onedrive_domain,   â˜ï¸ å¾®è½¯äº‘ç›˜
  - RULE-SET,private_domain,         DIRECT
  - RULE-SET,games@cn_domain,        DIRECT
  - RULE-SET,googlefcm_domain,       DIRECT
  - RULE-SET,microsoft@cn_domain,    DIRECT
  - RULE-SET,category-ai-!cn_domain, ğŸ‡ºğŸ‡¸ ç¾å›½
  - RULE-SET,youtube_domain,         ğŸ‡ºğŸ‡¸ ç¾å›½
  - RULE-SET,tiktok_domain,          ğŸ‡ºğŸ‡¸ ç¾å›½
  - RULE-SET,twitter_domain,         ğŸ‡ºğŸ‡¸ ç¾å›½
  - RULE-SET,github_domain,          ğŸ‡¸ğŸ‡¬ ç‹®åŸ
  - RULE-SET,telegram_domain,        ğŸ‡¸ğŸ‡¬ ç‹®åŸ
  - DOMAIN-SUFFIX,7773000.xyz,       DIRECT
  - RULE-SET,cn_domain,              DIRECT

  - RULE-SET,telegram_ip,          ğŸ‡¸ğŸ‡¬ ç‹®åŸ,
  - RULE-SET,twitter_ip,           ğŸ‡ºğŸ‡¸ ç¾å›½,
  - RULE-SET,private_ip,           DIRECT,
  - RULE-SET,cn_ip,                DIRECT,

  # æ¼ç½‘ä¹‹é±¼
  - MATCH,                         ğŸ”— é»˜è®¤ä»£ç†




rule-providers:
  # === Domain è§„åˆ™ ===
  # === å›½å†…åŸºç¡€åŸŸå ===
  private_domain:
    <<: *domain
    path: ./ruleset/domain/private.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs"
  cn_domain:
    <<: *domain
    path: ./ruleset/domain/cn.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"

  # === ç‰¹å®šç›´è¿åŸŸå ===
  games@cn_domain:
    <<: *domain
    path: ./ruleset/domain/games@cn.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-games@cn@cn.mrs"
  googlefcm_domain:
    <<: *domain
    path: ./ruleset/domain/googlefcm.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/googlefcm.mrs"
  microsoft@cn_domain:
    <<: *domain
    path: ./ruleset/domain/microsoft@cn.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft@cn.mrs"
  onedrive_domain:
    <<: *domain
    path: ./ruleset/domain/onedrive.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/onedrive.mrs"

  # === å›½å¤–å¸¸è§æœåŠ¡åŸŸå ===
  category-ai-!cn_domain:
    <<: *domain
    path: ./ruleset/domain/category-ai-!cn.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ai-!cn.mrs"
  telegram_domain:
    <<: *domain
    path: ./ruleset/domain/telegram.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs"
  youtube_domain:
    <<: *domain
    path: ./ruleset/domain/youtube.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs"
  tiktok_domain:
    <<: *domain
    path: ./ruleset/domain/tiktok.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs"
  twitter_domain:
    <<: *domain
    path: ./rules/domain/twitter.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/twitter.mrs"
  github_domain:
    <<: *domain
    path: ./rules/domain/github.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs"

  # === IP è§„åˆ™ ===
  private_ip:
    <<: *ip
    path: ./ruleset/ipcidr/private.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.mrs"
  cn_ip:
    <<: *ip
    path: ./ruleset/ipcidr/cn.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs"
  telegram_ip:
    <<: *ip
    path: ./ruleset/ipcidr/telegram.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs"
  twitter_ip:
    <<: *ip
    path: ./ruleset/ipcidr/twitter.mrs
    url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/twitter.mrs"
